{"ast":null,"code":"import { warnOnce } from '../../../utils/warn-once.mjs';\nimport { updateScrollInfo } from './info.mjs';\nimport { resolveOffsets } from './offsets/index.mjs';\n\nfunction _measure(container) {\n  var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : container;\n  var info = arguments.length > 2 ? arguments[2] : undefined;\n\n  /**\n   * Find inset of target within scrollable container\n   */\n  info.x.targetOffset = 0;\n  info.y.targetOffset = 0;\n\n  if (target !== container) {\n    var node = target;\n\n    while (node && node !== container) {\n      info.x.targetOffset += node.offsetLeft;\n      info.y.targetOffset += node.offsetTop;\n      node = node.offsetParent;\n    }\n  }\n\n  info.x.targetLength = target === container ? target.scrollWidth : target.clientWidth;\n  info.y.targetLength = target === container ? target.scrollHeight : target.clientHeight;\n  info.x.containerLength = container.clientWidth;\n  info.y.containerLength = container.clientHeight;\n  /**\n   * In development mode ensure scroll containers aren't position: static as this makes\n   * it difficult to measure their relative positions.\n   */\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (container && target && target !== container) {\n      warnOnce(getComputedStyle(container).position !== \"static\", \"Please ensure that the container has a non-static position, like 'relative', 'fixed', or 'absolute' to ensure scroll offset is calculated correctly.\");\n    }\n  }\n}\n\nfunction createOnScrollHandler(element, onScroll, info) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  return {\n    measure: function measure() {\n      return _measure(element, options.target, info);\n    },\n    update: function update(time) {\n      updateScrollInfo(element, info, time);\n\n      if (options.offset || options.target) {\n        resolveOffsets(element, info, options);\n      }\n    },\n    notify: function notify() {\n      return onScroll(info);\n    }\n  };\n}\n\nexport { createOnScrollHandler };","map":null,"metadata":{},"sourceType":"module"}